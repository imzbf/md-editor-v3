<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><script type="importmap">{"imports":{"#entry":"/md-editor-v3/_nuxt/Ebo4QgqN.js"}}</script><title>示例 - MdEditorV3 使用文档</title><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><script src="https://www.googletagmanager.com/gtag/js?id=G-3R6P1XE0H0" async></script><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Varela+Round&display=swap"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC&display=swap"><style>.docs-page{background-color:var(--iz-bk-color);color:var(--iz-color);min-height:100vh}.docs-page .doc{display:flex;padding:2rem}.docs-page .doc .catalog{width:25%}.docs-page .doc .content{flex-shrink:0;padding-right:1rem;width:75%}</style><style>@media (max-width:768px){.docs-page .doc{padding:0 1rem}.docs-page .doc .catalog{display:none}.docs-page .doc .content{padding-right:0;width:100%}.docs-page .doc .content .md-editor-preview-wrapper{padding-left:1rem;padding-right:1rem}}</style><style>.affix{max-height:100vh;overflow:auto;position:sticky;top:10px}.affix::-webkit-scrollbar{height:0;width:0}</style><style>.back-top{bottom:30px;cursor:pointer;font-size:26px;position:fixed;right:40px}</style><link rel="stylesheet" href="/md-editor-v3/_nuxt/entry.BPo7PEt1.css" crossorigin><link rel="stylesheet" href="/md-editor-v3/_nuxt/index.QqqhJ9QW.css" crossorigin><link rel="stylesheet" href="/md-editor-v3/_nuxt/index.BJmaNwJs.css" crossorigin><link rel="stylesheet" href="/md-editor-v3/_nuxt/index.DxpbYpYd.css" crossorigin><link rel="preload" as="fetch" crossorigin="anonymous" href="/md-editor-v3/zh-CN/demo/_payload.json?fef33df5-d761-4492-8cd8-456da3713513"><link rel="modulepreload" as="script" crossorigin href="/md-editor-v3/_nuxt/Ebo4QgqN.js"><link rel="modulepreload" as="script" crossorigin href="/md-editor-v3/_nuxt/D5xSN6GW.js"><link rel="modulepreload" as="script" crossorigin href="/md-editor-v3/_nuxt/BaMNNEQN.js"><link rel="modulepreload" as="script" crossorigin href="/md-editor-v3/_nuxt/n3mbQldj.js"><link rel="modulepreload" as="script" crossorigin href="/md-editor-v3/_nuxt/DlAUqK2U.js"><link rel="modulepreload" as="script" crossorigin href="/md-editor-v3/_nuxt/BN9_Rat7.js"><link rel="modulepreload" as="script" crossorigin href="/md-editor-v3/_nuxt/RNVKx7gM.js"><link rel="modulepreload" as="script" crossorigin href="/md-editor-v3/_nuxt/DAn4dSFZ.js"><link rel="modulepreload" as="script" crossorigin href="/md-editor-v3/_nuxt/olp6RHOE.js"><link rel="modulepreload" as="script" crossorigin href="/md-editor-v3/_nuxt/Dy4tPc3R.js"><link rel="modulepreload" as="script" crossorigin href="/md-editor-v3/_nuxt/BTqThMPg.js"><link rel="modulepreload" as="script" crossorigin href="/md-editor-v3/_nuxt/C4FVnCsf.js"><link rel="modulepreload" as="script" crossorigin href="/md-editor-v3/_nuxt/DcQIYjet.js"><link rel="modulepreload" as="script" crossorigin href="/md-editor-v3/_nuxt/CaH81vPM.js"><link rel="modulepreload" as="script" crossorigin href="/md-editor-v3/_nuxt/gEJX4xHq.js"><link rel="modulepreload" as="script" crossorigin href="/md-editor-v3/_nuxt/CPfvRdFC.js"><link rel="modulepreload" as="script" crossorigin href="/md-editor-v3/_nuxt/zBP5nJiZ.js"><link rel="modulepreload" as="script" crossorigin href="/md-editor-v3/_nuxt/_47zO_Ai.js"><link rel="modulepreload" as="script" crossorigin href="/md-editor-v3/_nuxt/Cy6klNfo.js"><link rel="preload" as="fetch" fetchpriority="low" crossorigin="anonymous" href="/md-editor-v3/_nuxt/builds/meta/fef33df5-d761-4492-8cd8-456da3713513.json"><script src="//at.alicdn.com/t/c/font_2818624_gbt6qvt9lob.js" defer></script><link rel="prefetch" as="style" crossorigin href="/md-editor-v3/_nuxt/index.CyoTw4j1.css"><link rel="prefetch" as="script" crossorigin href="/md-editor-v3/_nuxt/COKqEqb9.js"><link rel="prefetch" as="script" crossorigin href="/md-editor-v3/_nuxt/DyS04oG4.js"><link rel="prefetch" as="script" crossorigin href="/md-editor-v3/_nuxt/C5iJjx3N.js"><link rel="prefetch" as="script" crossorigin href="/md-editor-v3/_nuxt/DSd2FtkV.js"><script type="text/javascript">
              (function () {
                var redirect = sessionStorage.redirect;
                delete sessionStorage.redirect;
                if (redirect && redirect !== location.href) {
                  history.replaceState(null, null, redirect);
                }
              })();
          </script><script type="text/javascript">window.dataLayer = window.dataLayer || [];
                function gtag() {
                  dataLayer.push(arguments);
                }
                gtag('js', new Date());
                gtag('config', 'G-3R6P1XE0H0');</script><script type="text/javascript">
              var _hmt = _hmt || [];
              (function () {
                var hm = document.createElement('script');
                hm.src = 'https://hm.baidu.com/hm.js?1563bc52cb27ffbc7b5b46cdfc327ce0';
                var s = document.getElementsByTagName('script')[0];
                s.parentNode.insertBefore(hm, s);
              })();
          </script><meta name="keywords" content="MD Editor, md-editor-v3, Markdown 编辑器, Vue3 Markdown, Vue TSX, Markdown 组件, Markdown preview, Vue3 编辑器"><meta name="description" content="md-editor-v3 是一个基于 Vue 3 和 TSX 开发的 Markdown 编辑器组件，支持实时预览和丰富的 Markdown 功能。查阅详细的开发文档与使用示例。"><script type="module" src="/md-editor-v3/_nuxt/Ebo4QgqN.js" crossorigin></script></head><body><div id="__nuxt"><div class="docs-page"><header class="page-header"><section class="container"><h1 class="project-name"> md-editor-v3<sup>@6.0.0</sup></h1><p class="project-desc">Markdown编辑器Vue3版本，使用jsx和typescript语法开发，支持切换主题、prettier美化文本等。</p><div class="pc"><ul class="nav-list"><li class="nav-item"><a href="/md-editor-v3/zh-CN" class=""><svg class="icon" aria-hidden="true"><use xlink:href="#med-icon-homepage"></use></svg> 首页</a></li><li class="nav-item"><a href="/md-editor-v3/zh-CN/api" class=""><svg class="icon" aria-hidden="true"><use xlink:href="#med-icon-api"></use></svg> API</a></li><li class="nav-item"><a aria-current="page" href="/md-editor-v3/zh-CN/demo" class="router-link-active router-link-exact-active"><svg class="icon" aria-hidden="true"><use xlink:href="#med-icon-example"></use></svg> 示例</a></li><li class="nav-item"><a href="https://github.com/imzbf/md-editor-v3" target="_blank"><svg class="icon" aria-hidden="true"><use xlink:href="#med-icon-github"></use></svg> 源码</a></li><li class="nav-item"><a href="/md-editor-v3/zh-CN/syntax" class=""><svg class="icon" aria-hidden="true"><use xlink:href="#med-icon-syntax"></use></svg> 语法</a></li><li class="nav-item"><a href="/md-editor-v3/zh-CN/contrast" class=""><svg class="icon" aria-hidden="true"><use xlink:href="#med-icon-question"></use></svg> 对比</a></li><li class="nav-item"><a href="/md-editor-v3/zh-CN/about" class=""><svg class="icon" aria-hidden="true"><use xlink:href="#med-icon-about"></use></svg> 关于</a></li><li class="nav-item"><a href="/md-editor-v3/en-US" class="" style="display:none;">English</a><svg class="icon" aria-hidden="true"><use xlink:href="#med-icon-en"></use></svg> English</li></ul><p class="header-actions"><button class="btn btn-header">默认模式</button><button class="btn btn-header">暗黑模式</button><!--[--><!--[--><button class="btn btn-header">预览主题</button><!--]--><!----><!--]--><!--[--><!--[--><button class="btn btn-header">代码主题</button><!--]--><!----><!--]--></p></div><div class="mb"><!--[--><!----><!----><!--]--></div></section></header><!--[--><div class="container"><div class="doc"><div class="content"><div id="demo-preview" class="md-editor md-editor-previewOnly" style=""><!--[--><div id="demo-preview-preview" class="md-editor-preview default-theme md-editor-scrn"><h2 id="😁 基本使用示例" tabindex="-1" data-line="0"><a class="header-anchor" href="#😁 基本使用示例">😁 基本使用示例</a></h2>
<p data-line="2">目前一直在迭代开发，所以尽量安装最新版本。发布日志请前往：<a href="https://github.com/imzbf/md-editor-v3/releases" target="_blank">releases</a></p>
<h3 id="🤖 NPM 安装" tabindex="-1" data-line="4"><a class="header-anchor" href="#🤖 NPM 安装">🤖 NPM 安装</a></h3>

      <details  data-line="6" class="md-editor-code" open="">
        <summary class="md-editor-code-head">
          <div class="md-editor-code-flag">
            <ul class="md-editor-codetab-label" role="tablist">
        <li>
          <input
            type="radio"
            id="label-md-editor-codetab-label-1-demo-preview-9-0"
            name="md-editor-codetab-label-demo-preview-9"
            class="md-editor-codetab-demo-preview-9-0"
            checked
          >
          <label
            for="label-md-editor-codetab-label-1-demo-preview-9-0"
            onclick="this.getRootNode().querySelectorAll('.md-editor-codetab-demo-preview-9-0').forEach(e => e.click())"
          >
            npm
          </label>
        </li>
        <li>
          <input
            type="radio"
            id="label-md-editor-codetab-label-1-demo-preview-9-1"
            name="md-editor-codetab-label-demo-preview-9"
            class="md-editor-codetab-demo-preview-9-1"
            
          >
          <label
            for="label-md-editor-codetab-label-1-demo-preview-9-1"
            onclick="this.getRootNode().querySelectorAll('.md-editor-codetab-demo-preview-9-1').forEach(e => e.click())"
          >
            yarn
          </label>
        </li></ul>
          </div>
          <div class="md-editor-code-action">
            <span class="md-editor-codetab-lang">
        <input
          type="radio"
          name="md-editor-codetab-lang-demo-preview-9"
          class="md-editor-codetab-demo-preview-9-0"
          checked
          role="presentation">
        <span class=md-editor-code-lang role="note">shell</span>
        <input
          type="radio"
          name="md-editor-codetab-lang-demo-preview-9"
          class="md-editor-codetab-demo-preview-9-1"
          
          role="presentation">
        <span class=md-editor-code-lang role="note">shell</span></span>
            <span class="md-editor-copy-button" data-tips="复制代码">复制代码</span>
            
            <span class="md-editor-collapse-tips"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-circle-chevron-left md-editor-icon"><circle cx="12" cy="12" r="10"/><path d="m14 16-4-4 4-4"/></svg></span>
          </div>
        </summary>
        
        <div role="tabpanel">
          <input
            type="radio"
            name="md-editor-codetab-pre-demo-preview-9"
            class="md-editor-codetab-demo-preview-9-0"
            checked
            role="presentation">
          <pre><code class="language-shell" language=shell><span class="md-editor-code-block">npm install md-editor-v3</span><span rn-wrapper aria-hidden="true"><span></span></span></code></pre>

        </div>
        <div role="tabpanel">
          <input
            type="radio"
            name="md-editor-codetab-pre-demo-preview-9"
            class="md-editor-codetab-demo-preview-9-1"
            
            role="presentation">
          <pre><code class="language-shell" language=shell><span class="md-editor-code-block">yarn add md-editor-v3</span><span rn-wrapper aria-hidden="true"><span></span></span></code></pre>

        </div>
      </details>
    
<div data-line="14" class="md-editor-admonition md-editor-admonition-warning">
<p data-line="16"><s>当使用服务端渲染时，请务必设置<code>editorId</code>为固定值。</s></p>
<p data-line="18">5.0 开始，没有该限制了。</p>
</div>
<h3 id="🤓 CDN 链接" tabindex="-1" data-line="22"><a class="header-anchor" href="#🤓 CDN 链接">🤓 CDN 链接</a></h3>
<p data-line="24">通过直接链接生产版本来使用，下面是一个小例子：</p>

        <details  data-line="26" class="md-editor-code">
          <summary class="md-editor-code-head">
            <div class="md-editor-code-flag"><span></span><span></span><span></span></div>
            <div class="md-editor-code-action">
              <span class="md-editor-code-lang">html</span>
              <span class="md-editor-copy-button" data-tips="复制代码">复制代码</span>
              
              <span class="md-editor-collapse-tips"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-circle-chevron-left md-editor-icon"><circle cx="12" cy="12" r="10"/><path d="m14 16-4-4 4-4"/></svg></span>
            </div>
          </summary>
          <pre><code class="language-html" language=html><span class="md-editor-code-block">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;zh-CN&quot;&gt;
  &lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot; /&gt;
    &lt;title&gt;全局引用&lt;/title&gt;
    &lt;link href=&quot;https://unpkg.com/md-editor-v3@6.0.0/lib/style.css&quot; rel=&quot;stylesheet&quot; /&gt;
    &lt;script type=&quot;importmap&quot;&gt;
      {
        &quot;imports&quot;: {
          &quot;vue&quot;: &quot;https://esm.sh/vue/dist/vue.esm-browser.js&quot;,
          &quot;medium-zoom&quot;: &quot;https://esm.sh/medium-zoom&quot;,
          &quot;lru-cache&quot;: &quot;https://esm.sh/lru-cache&quot;,
          &quot;codemirror&quot;: &quot;https://esm.sh/codemirror&quot;,
          &quot;lucide-vue-next&quot;: &quot;https://esm.sh/lucide-vue-next&quot;,
          &quot;@vavt/&quot;: &quot;https://esm.sh/@vavt/&quot;,
          &quot;@codemirror/&quot;: &quot;https://esm.sh/@codemirror/&quot;,
          &quot;@lezer/&quot;: &quot;https://esm.sh/@lezer/&quot;,
          &quot;markdown-it&quot;: &quot;https://esm.sh/markdown-it&quot;,
          &quot;markdown-it-image-figures&quot;: &quot;https://esm.sh/markdown-it-image-figures&quot;,
          &quot;markdown-it-sub&quot;: &quot;https://esm.sh/markdown-it-sub&quot;,
          &quot;markdown-it-sup&quot;: &quot;https://esm.sh/markdown-it-sup&quot;,
          &quot;md-editor-v3&quot;: &quot;https://cdn.jsdelivr.net/npm/md-editor-v3@6.0.0/lib/es/index.mjs&quot;
        }
      }
    &lt;/script&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;div id=&quot;md-editor-v3&quot;&gt;
      &lt;md-editor v-model=&quot;text&quot; /&gt;
    &lt;/div&gt;
    &lt;script type=&quot;module&quot;&gt;
      import { createApp, ref } from 'vue';
      import { MdEditor } from 'md-editor-v3';

      const App = {
        components: { MdEditor },
        setup() {
          const text = ref('# Hello md-editor-v3!');
          return { text };
        },
      };

      createApp(App).mount('#md-editor-v3');
    &lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;</span><span rn-wrapper aria-hidden="true"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

        </details>
      <h4 id="🥱 Setup 模板" tabindex="-1" data-line="75"><a class="header-anchor" href="#🥱 Setup 模板">🥱 Setup 模板</a></h4>

        <details  data-line="77" class="md-editor-code" open="">
          <summary class="md-editor-code-head">
            <div class="md-editor-code-flag"><span></span><span></span><span></span></div>
            <div class="md-editor-code-action">
              <span class="md-editor-code-lang">vue</span>
              <span class="md-editor-copy-button" data-tips="复制代码">复制代码</span>
              
              <span class="md-editor-collapse-tips"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-circle-chevron-left md-editor-icon"><circle cx="12" cy="12" r="10"/><path d="m14 16-4-4 4-4"/></svg></span>
            </div>
          </summary>
          <pre><code class="language-vue" language=vue><span class="md-editor-code-block">&lt;template&gt;
  &lt;MdEditor v-model=&quot;text&quot; /&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { ref } from 'vue';
import { MdEditor } from 'md-editor-v3';
import 'md-editor-v3/lib/style.css';

const text = ref('Hello Editor!');
&lt;/script&gt;</span><span rn-wrapper aria-hidden="true"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

        </details>
      <h4 id="🤗 Jsx 模板" tabindex="-1" data-line="91"><a class="header-anchor" href="#🤗 Jsx 模板">🤗 Jsx 模板</a></h4>

        <details  data-line="93" class="md-editor-code" open="">
          <summary class="md-editor-code-head">
            <div class="md-editor-code-flag"><span></span><span></span><span></span></div>
            <div class="md-editor-code-action">
              <span class="md-editor-code-lang">js</span>
              <span class="md-editor-copy-button" data-tips="复制代码">复制代码</span>
              
              <span class="md-editor-collapse-tips"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-circle-chevron-left md-editor-icon"><circle cx="12" cy="12" r="10"/><path d="m14 16-4-4 4-4"/></svg></span>
            </div>
          </summary>
          <pre><code class="language-js" language=js><span class="md-editor-code-block">import { defineComponent, ref } from 'vue';
import { MdEditor } from 'md-editor-v3';
import 'md-editor-v3/lib/style.css';

export default defineComponent({
  name: 'MdEditor',
  setup() {
    const text = ref('');
    const onChange = (v: string) =&gt; (text.value = v);

    return () =&gt; &lt;MdEditor modelValue={text.value} onChange={onChange} /&gt;;
  },
});</span><span rn-wrapper aria-hidden="true"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

        </details>
      <h4 id="📖 仅预览" tabindex="-1" data-line="109"><a class="header-anchor" href="#📖 仅预览">📖 仅预览</a></h4>

        <details  data-line="111" class="md-editor-code" open="">
          <summary class="md-editor-code-head">
            <div class="md-editor-code-flag"><span></span><span></span><span></span></div>
            <div class="md-editor-code-action">
              <span class="md-editor-code-lang">vue</span>
              <span class="md-editor-copy-button" data-tips="复制代码">复制代码</span>
              
              <span class="md-editor-collapse-tips"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-circle-chevron-left md-editor-icon"><circle cx="12" cy="12" r="10"/><path d="m14 16-4-4 4-4"/></svg></span>
            </div>
          </summary>
          <pre><code class="language-vue" language=vue><span class="md-editor-code-block">&lt;template&gt;
  &lt;MdPreview :id=&quot;id&quot; :modelValue=&quot;text&quot; /&gt;
  &lt;MdCatalog :editorId=&quot;id&quot; :scrollElement=&quot;scrollElement&quot; /&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { ref } from 'vue';
import { MdPreview, MdCatalog } from 'md-editor-v3';
// preview.css相比style.css少了编辑器那部分样式
import 'md-editor-v3/lib/preview.css';

const id = 'preview-only';
const text = ref('# Hello Editor');
const scrollElement = document.documentElement;
&lt;/script&gt;</span><span rn-wrapper aria-hidden="true"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

        </details>
      <div data-line="129" class="md-editor-admonition md-editor-admonition-warning">
<p data-line="131">当使用服务端渲染时，<code>scrollElement</code>应该是字符类型，例：<code>html</code>、<code>body</code>、<code>#id</code>、<code>.class</code>。</p>
</div>
<h2 id="🎛 Web Component 中使用" tabindex="-1" data-line="135"><a class="header-anchor" href="#🎛 Web Component 中使用">🎛 Web Component 中使用</a></h2>
<p data-line="137">完整的示例参考源码中提供的<a href="https://github.com/imzbf/md-editor-v3/tree/main/example/webComponent" target="_blank">示例项目</a></p>
<p data-line="139">下面是注意事项</p>
<ol data-line="141">
<li data-line="141">内部的图片放大查看无效，需要自行实现！！！</li>
<li data-line="142">不能默认的使用 CDN 引用依赖库，参考<a href="https://imzbf.github.io/md-editor-v3/zh-CN/demo#%F0%9F%99%8D%F0%9F%8F%BB%E2%80%8D%E2%99%82%EF%B8%8F%20%E8%87%AA%E8%A1%8C%E5%BC%95%E5%85%A5%E6%89%A9%E5%B1%95%E5%BA%93" target="_blank">[自行引入扩展库]</a>！！！</li>
</ol>
<h2 id="🥂 扩展功能" tabindex="-1" data-line="144"><a class="header-anchor" href="#🥂 扩展功能">🥂 扩展功能</a></h2>
<p data-line="146">这里包含了一些编辑器<code>api</code>的使用示范</p>
<h3 id="🥶 自定义快捷键" tabindex="-1" data-line="148"><a class="header-anchor" href="#🥶 自定义快捷键">🥶 自定义快捷键</a></h3>
<ul data-line="150">
<li data-line="150">
<p data-line="150">内置的快捷键配置的源码：<a href="https://github.com/imzbf/md-editor-v3/blob/develop/MdEditor/layouts/Content/codemirror/commands.ts" target="_blank">commands.ts</a>，它们作为扩展项被添加到了<code>codemirror</code>。</p>
</li>
<li data-line="152">
<p data-line="152">想要替换、删除快捷键的基本原理是找到对应的扩展，然后遍历这个快捷键配置的数组，找到并处理它。</p>
</li>
<li data-line="154">
<p data-line="154">事实上，<code>config</code>中<code>codeMirrorExtensions</code>的第二入参<code>extensions</code>是一个数组，它的第一项就是快捷键扩展，第三入参就是默认的快捷键配置。</p>
</li>
</ul>
<h4 id="💅 修改快捷键" tabindex="-1" data-line="156"><a class="header-anchor" href="#💅 修改快捷键">💅 修改快捷键</a></h4>
<p data-line="158">将<code>Ctrl-b</code>修改为<code>Ctrl-m</code></p>

        <details  data-line="160" class="md-editor-code">
          <summary class="md-editor-code-head">
            <div class="md-editor-code-flag"><span></span><span></span><span></span></div>
            <div class="md-editor-code-action">
              <span class="md-editor-code-lang">js</span>
              <span class="md-editor-copy-button" data-tips="复制代码">复制代码</span>
              
              <span class="md-editor-collapse-tips"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-circle-chevron-left md-editor-icon"><circle cx="12" cy="12" r="10"/><path d="m14 16-4-4 4-4"/></svg></span>
            </div>
          </summary>
          <pre><code class="language-js" language=js><span class="md-editor-code-block">import { config } from 'md-editor-v3';
import { keymap } from '@codemirror/view';

config({
  // [keymap, minimalSetup, markdown, EditorView.lineWrapping, EditorView.updateListener, EditorView.domEventHandlers, oneDark??oneLight]
  codeMirrorExtensions(theme, extensions, mdEditorCommands) {
    const newExtensions = [...extensions];
    // 1. 先把默认的快捷键扩展移除
    newExtensions.shift();

    // 2. 参考快捷键配置的源码，找到CtrlB的配置项在mdEditorCommands中的位置
    const CtrlB = mdEditorCommands[0];

    // 3. 配置codemirror快捷键的文档
    // https://codemirror.net/docs/ref/#commands
    const CtrlM = {
      // 这里我们需要CtrlB默认触发执行的run方法，如果是新增快捷键等，就需要自行处理触发逻辑
      ...CtrlB,
      key: 'Ctrl-m',
      mac: 'Cmd-m',
    };

    // 4. 把修改后的快捷键放到待构建扩展的数组中
    const newMdEditorCommands = [CtrlM, ...mdEditorCommands.filter((i) =&gt; i.key !== 'Ctrl-b')];

    newExtensions.push(keymap.of(newMdEditorCommands));

    return newExtensions;
  },
});</span><span rn-wrapper aria-hidden="true"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

        </details>
      <h4 id="✂️ 删除快捷键" tabindex="-1" data-line="193"><a class="header-anchor" href="#✂️ 删除快捷键">✂️ 删除快捷键</a></h4>
<p data-line="195">禁用所有快捷键</p>

        <details  data-line="197" class="md-editor-code" open="">
          <summary class="md-editor-code-head">
            <div class="md-editor-code-flag"><span></span><span></span><span></span></div>
            <div class="md-editor-code-action">
              <span class="md-editor-code-lang">js</span>
              <span class="md-editor-copy-button" data-tips="复制代码">复制代码</span>
              
              <span class="md-editor-collapse-tips"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-circle-chevron-left md-editor-icon"><circle cx="12" cy="12" r="10"/><path d="m14 16-4-4 4-4"/></svg></span>
            </div>
          </summary>
          <pre><code class="language-js" language=js><span class="md-editor-code-block">import { config } from 'md-editor-v3';

config({
  // [keymap, minimalSetup, markdown, EditorView.lineWrapping, EditorView.updateListener, EditorView.domEventHandlers, oneDark??oneLight]
  codeMirrorExtensions(theme, extensions) {
    const newExtensions = [...extensions];
    // 1. 把默认的快捷键扩展移除
    newExtensions.shift();

    // 2. 返回扩展列表即可
    return newExtensions;
  },
});</span><span rn-wrapper aria-hidden="true"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

        </details>
      <h4 id="💉 新增快捷键" tabindex="-1" data-line="213"><a class="header-anchor" href="#💉 新增快捷键">💉 新增快捷键</a></h4>
<p data-line="215">如果涉及到向编辑框插入内容，这是需要借助组件实例上绑定的<code>insert</code>方法，参考<a href="/md-editor-v3/zh-CN/docs#%F0%9F%92%89%20insert" target="_blank">手动向文本框插入内容</a>。</p>
<p data-line="217">如果不是在编辑器所在的组件中使用<code>config</code>，这是无法拿到编辑器组件实例，这时，你可能需要借助<code>event-bus</code>。</p>
<p data-line="219">示例实现<code>Ctrl+m</code>向编辑框插入标记模块(<code>==mark==</code>)</p>
<p data-line="221"><code>index.ts</code></p>

        <details  data-line="223" class="md-editor-code">
          <summary class="md-editor-code-head">
            <div class="md-editor-code-flag"><span></span><span></span><span></span></div>
            <div class="md-editor-code-action">
              <span class="md-editor-code-lang">js</span>
              <span class="md-editor-copy-button" data-tips="复制代码">复制代码</span>
              
              <span class="md-editor-collapse-tips"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-circle-chevron-left md-editor-icon"><circle cx="12" cy="12" r="10"/><path d="m14 16-4-4 4-4"/></svg></span>
            </div>
          </summary>
          <pre><code class="language-js" language=js><span class="md-editor-code-block">import { config } from 'md-editor-v3';
import { keymap, KeyBinding } from '@codemirror/view';
// 假设你使用了EventBus
import bus from '@/utils/event-bus';

config({
  // [keymap, minimalSetup, markdown, EditorView.lineWrapping, EditorView.updateListener, EditorView.domEventHandlers, oneDark??oneLight]
  codeMirrorExtensions(theme, extensions, mdEditorCommands) {
    const newExtensions = [...extensions];
    // 1. 先把默认的快捷键扩展移除
    newExtensions.shift();

    // 2. 创建一个新的快捷键配置，参考https://codemirror.net/docs/ref/#commands
    const CtrlM: KeyBinding = {
      key: 'Ctrl-m',
      mac: 'Cmd-m',
      run: () =&gt; {
        bus.emit('insertMarkBlock');
        return true;
      },
    };

    // 4. 把新的快捷键添加到数组中
    const newMdEditorCommands = [...mdEditorCommands, CtrlM];

    newExtensions.push(keymap.of(newMdEditorCommands));

    return newExtensions;
  },
});</span><span rn-wrapper aria-hidden="true"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

        </details>
      <p data-line="256">接下来在编辑器所在组件监听<code>insertMarkBlock</code>这个事件</p>
<p data-line="258"><code>index.vue</code></p>

        <details  data-line="260" class="md-editor-code" open="">
          <summary class="md-editor-code-head">
            <div class="md-editor-code-flag"><span></span><span></span><span></span></div>
            <div class="md-editor-code-action">
              <span class="md-editor-code-lang">vue</span>
              <span class="md-editor-copy-button" data-tips="复制代码">复制代码</span>
              
              <span class="md-editor-collapse-tips"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-circle-chevron-left md-editor-icon"><circle cx="12" cy="12" r="10"/><path d="m14 16-4-4 4-4"/></svg></span>
            </div>
          </summary>
          <pre><code class="language-vue" language=vue><span class="md-editor-code-block">&lt;template&gt;
  &lt;MdEditor ref=&quot;mdEditorRef&quot; v-model=&quot;text&quot; /&gt;
&lt;/template&gt;

&lt;script setup lang=&quot;ts&quot;&gt;
import { MdEditor } from 'md-editor-v3';
import type { ExposeParam } from 'md-editor-v3';
import { ref, onMounted } from 'vue';
// 假设你使用了EventBus
import bus from '@/utils/event-bus';

const text = ref&lt;string&gt;('## md-editor-v3\n\n');

const mdEditorRef = ref&lt;ExposeParam&gt;();

onMounted(() =&gt; {
  bus.on('insertMarkBlock', () =&gt; {
    mdEditorRef.value?.insert((selectedText) =&gt; {
      return {
        targetValue: `==${selectedText}==`,
        select: true,
        deviationStart: 2,
        deviationEnd: -2,
      };
    });
  });
});
&lt;/script&gt;</span><span rn-wrapper aria-hidden="true"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

        </details>
      <p data-line="291">附：<code>EventBus</code>最简单实现</p>

        <details  data-line="293" class="md-editor-code">
          <summary class="md-editor-code-head">
            <div class="md-editor-code-flag"><span></span><span></span><span></span></div>
            <div class="md-editor-code-action">
              <span class="md-editor-code-lang">ts</span>
              <span class="md-editor-copy-button" data-tips="复制代码">复制代码</span>
              
              <span class="md-editor-collapse-tips"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-circle-chevron-left md-editor-icon"><circle cx="12" cy="12" r="10"/><path d="m14 16-4-4 4-4"/></svg></span>
            </div>
          </summary>
          <pre><code class="language-ts" language=ts><span class="md-editor-code-block">/* eslint-disable @typescript-eslint/ban-types */
class EventBus {
  private events: Map&lt;string, Function[]&gt;;

  constructor() {
    this.events = new Map();
  }

  on(eventName: string, fn: Function) {
    if (!eventName) {
      console.error('无效的事件名称');
      return false;
    }

    if (!(fn instanceof Function)) {
      console.error('无效的回调方法');
      return false;
    }

    const fns = this.events.get(eventName) || [];
    fns.push(fn);
    this.events.set(eventName, fns);
  }

  emit(eventName: string, ...args: any[]) {
    this.events.get(eventName)?.forEach((fn) =&gt; {
      fn(args);
    });
  }
}

export default new EventBus();</span><span rn-wrapper aria-hidden="true"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

        </details>
      <h3 id="🍦 主题切换" tabindex="-1" data-line="328"><a class="header-anchor" href="#🍦 主题切换">🍦 主题切换</a></h3>
<p data-line="330">主题分为了编辑器主题（<code>theme</code>，称为全局主题）、预览内容主题（<code>previewTheme</code>）和块级代码主题（<code>codeTheme</code>），他们都支持响应式更新，而非只能预设。</p>
<h4 id="🍧 编辑器主题" tabindex="-1" data-line="332"><a class="header-anchor" href="#🍧 编辑器主题">🍧 编辑器主题</a></h4>
<p data-line="334">支持默认和暗夜模式两种</p>

        <details  data-line="336" class="md-editor-code" open="">
          <summary class="md-editor-code-head">
            <div class="md-editor-code-flag"><span></span><span></span><span></span></div>
            <div class="md-editor-code-action">
              <span class="md-editor-code-lang">vue</span>
              <span class="md-editor-copy-button" data-tips="复制代码">复制代码</span>
              
              <span class="md-editor-collapse-tips"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-circle-chevron-left md-editor-icon"><circle cx="12" cy="12" r="10"/><path d="m14 16-4-4 4-4"/></svg></span>
            </div>
          </summary>
          <pre><code class="language-vue" language=vue><span class="md-editor-code-block">&lt;template&gt;
  &lt;MdEditor v-model=&quot;state.text&quot; :theme=&quot;state.theme&quot; /&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { reactive } from 'vue';
import { MdEditor } from 'md-editor-v3';
import 'md-editor-v3/lib/style.css';

const state = reactive({
  text: '',
  theme: 'dark',
});
&lt;/script&gt;</span><span rn-wrapper aria-hidden="true"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

        </details>
      <h4 id="🍡 预览主题" tabindex="-1" data-line="353"><a class="header-anchor" href="#🍡 预览主题">🍡 预览主题</a></h4>
<p data-line="355">内置了<code>default</code>、<code>github</code>、<code>vuepress</code>、<code>mk-cute</code>、<code>smart-blue</code>、<code>cyanosis</code>6 种主题，在一些直接预览文档内容时使用。并且支持在线切换（修改<code>previewTheme</code>即可）和自行扩展。</p>
<ul data-line="357">
<li data-line="357">
<p data-line="357">使用</p>

        <details  data-line="359" class="md-editor-code" open="">
          <summary class="md-editor-code-head">
            <div class="md-editor-code-flag"><span></span><span></span><span></span></div>
            <div class="md-editor-code-action">
              <span class="md-editor-code-lang">vue</span>
              <span class="md-editor-copy-button" data-tips="复制代码">复制代码</span>
              
              <span class="md-editor-collapse-tips"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-circle-chevron-left md-editor-icon"><circle cx="12" cy="12" r="10"/><path d="m14 16-4-4 4-4"/></svg></span>
            </div>
          </summary>
          <pre><code class="language-vue" language=vue><span class="md-editor-code-block">&lt;template&gt;
  &lt;MdEditor v-model=&quot;state.text&quot; :previewTheme=&quot;state.theme&quot; /&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { reactive } from 'vue';
import { MdEditor } from 'md-editor-v3';
import 'md-editor-v3/lib/style.css';

const state = reactive({
  text: '',
  theme: 'cyanosis',
});
&lt;/script&gt;</span><span rn-wrapper aria-hidden="true"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

        </details>
      </li>
<li data-line="376">
<p data-line="376">自定义</p>
<ol data-line="378">
<li data-line="378">先以<code>xxx-theme</code>为类名，定义你的主题<code>css</code>，xxx 是主题名称，具体的内容参考<a href="https://github.com/imzbf/markdown-theme" target="_blank">markdown-theme</a></li>
</ol>
<p data-line="380"><em>xxx.css</em></p>

        <details  data-line="382" class="md-editor-code" open="">
          <summary class="md-editor-code-head">
            <div class="md-editor-code-flag"><span></span><span></span><span></span></div>
            <div class="md-editor-code-action">
              <span class="md-editor-code-lang">css</span>
              <span class="md-editor-copy-button" data-tips="复制代码">复制代码</span>
              
              <span class="md-editor-collapse-tips"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-circle-chevron-left md-editor-icon"><circle cx="12" cy="12" r="10"/><path d="m14 16-4-4 4-4"/></svg></span>
            </div>
          </summary>
          <pre><code class="language-css" language=css><span class="md-editor-code-block">.xxx-theme code {
  color: red;
}</span><span rn-wrapper aria-hidden="true"><span></span><span></span><span></span></span></code></pre>

        </details>
      <ol start="2" data-line="388">
<li data-line="388">全局引入</li>
</ol>

        <details  data-line="390" class="md-editor-code" open="">
          <summary class="md-editor-code-head">
            <div class="md-editor-code-flag"><span></span><span></span><span></span></div>
            <div class="md-editor-code-action">
              <span class="md-editor-code-lang">js</span>
              <span class="md-editor-copy-button" data-tips="复制代码">复制代码</span>
              
              <span class="md-editor-collapse-tips"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-circle-chevron-left md-editor-icon"><circle cx="12" cy="12" r="10"/><path d="m14 16-4-4 4-4"/></svg></span>
            </div>
          </summary>
          <pre><code class="language-js" language=js><span class="md-editor-code-block">import 'xxx.css';</span><span rn-wrapper aria-hidden="true"><span></span></span></code></pre>

        </details>
      <ol start="3" data-line="394">
<li data-line="394">设置<code>previewTheme</code>为 xxx</li>
</ol>

        <details  data-line="396" class="md-editor-code" open="">
          <summary class="md-editor-code-head">
            <div class="md-editor-code-flag"><span></span><span></span><span></span></div>
            <div class="md-editor-code-action">
              <span class="md-editor-code-lang">vue</span>
              <span class="md-editor-copy-button" data-tips="复制代码">复制代码</span>
              
              <span class="md-editor-collapse-tips"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-circle-chevron-left md-editor-icon"><circle cx="12" cy="12" r="10"/><path d="m14 16-4-4 4-4"/></svg></span>
            </div>
          </summary>
          <pre><code class="language-vue" language=vue><span class="md-editor-code-block">&lt;template&gt;
  &lt;MdEditor previewTheme=&quot;xxx&quot; /&gt;
&lt;/template&gt;</span><span rn-wrapper aria-hidden="true"><span></span><span></span><span></span></span></code></pre>

        </details>
      </li>
</ul>
<h4 id="🎄 代码主题" tabindex="-1" data-line="402"><a class="header-anchor" href="#🎄 代码主题">🎄 代码主题</a></h4>
<p data-line="404">内置了<code>atom</code>、<code>a11y</code>、<code>github</code>、<code>gradient</code>、<code>kimbie</code>、<code>paraiso</code>、<code>qtcreator</code>、<code>stackoverflow</code>代码主题，均来至<a href="https://highlightjs.org/" target="_blank">highlight.js</a></p>
<ul data-line="406">
<li data-line="406">
<p data-line="406">使用</p>

        <details  data-line="408" class="md-editor-code" open="">
          <summary class="md-editor-code-head">
            <div class="md-editor-code-flag"><span></span><span></span><span></span></div>
            <div class="md-editor-code-action">
              <span class="md-editor-code-lang">vue</span>
              <span class="md-editor-copy-button" data-tips="复制代码">复制代码</span>
              
              <span class="md-editor-collapse-tips"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-circle-chevron-left md-editor-icon"><circle cx="12" cy="12" r="10"/><path d="m14 16-4-4 4-4"/></svg></span>
            </div>
          </summary>
          <pre><code class="language-vue" language=vue><span class="md-editor-code-block">&lt;template&gt;
  &lt;MdEditor v-model=&quot;state.text&quot; :codeTheme=&quot;state.theme&quot; /&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { reactive } from 'vue';
import { MdEditor } from 'md-editor-v3';
import 'md-editor-v3/lib/style.css';

const state = reactive({
  text: '',
  theme: 'atom',
});
&lt;/script&gt;</span><span rn-wrapper aria-hidden="true"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

        </details>
      </li>
<li data-line="425">
<p data-line="425">自定义</p>
<ol data-line="427">
<li data-line="427">找到你喜欢的代码主题，最好支持暗夜模式</li>
</ol>

        <details  data-line="429" class="md-editor-code" open="">
          <summary class="md-editor-code-head">
            <div class="md-editor-code-flag"><span></span><span></span><span></span></div>
            <div class="md-editor-code-action">
              <span class="md-editor-code-lang">js</span>
              <span class="md-editor-copy-button" data-tips="复制代码">复制代码</span>
              
              <span class="md-editor-collapse-tips"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-circle-chevron-left md-editor-icon"><circle cx="12" cy="12" r="10"/><path d="m14 16-4-4 4-4"/></svg></span>
            </div>
          </summary>
          <pre><code class="language-js" language=js><span class="md-editor-code-block">import { config } from 'md-editor-v3';

config({
  editorExtensions: {
    highlight: {
      css: {
        xxxxx: {
          light: 'https://unpkg.com/highlight.js@11.2.0/styles/xxxxx-light.css',
          dark: 'https://unpkg.com/highlight.js@11.2.0/styles/xxxxx-dark.css',
        },
        yyyyy: {
          light: 'https://unpkg.com/highlight.js@11.2.0/styles/xxxxx-light.css',
          dark: 'https://unpkg.com/highlight.js@11.2.0/styles/xxxxx-dark.css',
        },
      },
    },
  },
});</span><span rn-wrapper aria-hidden="true"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

        </details>
      <p data-line="450">你可以通过将<code>css</code>的<code>key</code>设置为内置名称来覆盖内置的链接。</p>
<ol start="2" data-line="452">
<li data-line="452">设置<code>codeTheme</code></li>
</ol>

        <details  data-line="454" class="md-editor-code" open="">
          <summary class="md-editor-code-head">
            <div class="md-editor-code-flag"><span></span><span></span><span></span></div>
            <div class="md-editor-code-action">
              <span class="md-editor-code-lang">vue</span>
              <span class="md-editor-copy-button" data-tips="复制代码">复制代码</span>
              
              <span class="md-editor-collapse-tips"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-circle-chevron-left md-editor-icon"><circle cx="12" cy="12" r="10"/><path d="m14 16-4-4 4-4"/></svg></span>
            </div>
          </summary>
          <pre><code class="language-vue" language=vue><span class="md-editor-code-block">&lt;template&gt;
  &lt;MdEditor codeTheme=&quot;xxxxx&quot; /&gt;
&lt;/template&gt;</span><span rn-wrapper aria-hidden="true"><span></span><span></span><span></span></span></code></pre>

        </details>
      </li>
</ul>
<h3 id="🛠 扩展库替换" tabindex="-1" data-line="460"><a class="header-anchor" href="#🛠 扩展库替换">🛠 扩展库替换</a></h3>
<p data-line="462">highlight、prettier、cropper、screenfull 均使用外链引入，在无外网的时候，部分可将项目中已安装的依赖传入，也可以使用下载好的引用。</p>
<p data-line="464"><code>screenfull</code> 的例子：</p>
<h4 id="⚰️ 内置实例" tabindex="-1" data-line="466"><a class="header-anchor" href="#⚰️ 内置实例">⚰️ 内置实例</a></h4>

        <details  data-line="468" class="md-editor-code" open="">
          <summary class="md-editor-code-head">
            <div class="md-editor-code-flag"><span></span><span></span><span></span></div>
            <div class="md-editor-code-action">
              <span class="md-editor-code-lang">vue</span>
              <span class="md-editor-copy-button" data-tips="复制代码">复制代码</span>
              
              <span class="md-editor-collapse-tips"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-circle-chevron-left md-editor-icon"><circle cx="12" cy="12" r="10"/><path d="m14 16-4-4 4-4"/></svg></span>
            </div>
          </summary>
          <pre><code class="language-vue" language=vue><span class="md-editor-code-block">&lt;template&gt;
  &lt;MdEditor v-model=&quot;text&quot; /&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { ref } from 'vue';
// 引用screenfull
import screenfull from 'screenfull';
import { MdEditor, config } from 'md-editor-v3';
import 'md-editor-v3/lib/style.css';

config({
  editorExtensions: {
    screenfull: {
      instance: screenfull,
    },
  },
});

const text = ref('');
&lt;/script&gt;</span><span rn-wrapper aria-hidden="true"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

        </details>
      <h4 id="📡 内网链接" tabindex="-1" data-line="492"><a class="header-anchor" href="#📡 内网链接">📡 内网链接</a></h4>
<p data-line="494">对应的 js 文件可以去<a href="https://unpkg.com" target="_blank">unpkg.com</a>，直接找到对应的文件下载即可。</p>

        <details  data-line="496" class="md-editor-code" open="">
          <summary class="md-editor-code-head">
            <div class="md-editor-code-flag"><span></span><span></span><span></span></div>
            <div class="md-editor-code-action">
              <span class="md-editor-code-lang">vue</span>
              <span class="md-editor-copy-button" data-tips="复制代码">复制代码</span>
              
              <span class="md-editor-collapse-tips"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-circle-chevron-left md-editor-icon"><circle cx="12" cy="12" r="10"/><path d="m14 16-4-4 4-4"/></svg></span>
            </div>
          </summary>
          <pre><code class="language-vue" language=vue><span class="md-editor-code-block">&lt;template&gt;
  &lt;MdEditor v-model=&quot;text&quot; /&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { ref } from 'vue';
import { MdEditor, config } from 'md-editor-v3';
import 'md-editor-v3/lib/style.css';

config({
  editorExtensions: {
    screenfull: {
      js: 'https://localhost:8090/screenfull@5.2.0/index.js',
    },
  },
});

const text = ref('');
&lt;/script&gt;</span><span rn-wrapper aria-hidden="true"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

        </details>
      <h3 id="📷 图片上传" tabindex="-1" data-line="518"><a class="header-anchor" href="#📷 图片上传">📷 图片上传</a></h3>
<p data-line="520">默认可以选择多张图片，支持截图粘贴板上传图片，支持复制网页图片粘贴上传。</p>
<blockquote data-line="522">
<p data-line="522">注意：粘贴板上传时，如果是网页上的 gif 图，无法正确上传为 gif 格式！请保存本地后再手动上传。</p>
</blockquote>

        <details  data-line="524" class="md-editor-code">
          <summary class="md-editor-code-head">
            <div class="md-editor-code-flag"><span></span><span></span><span></span></div>
            <div class="md-editor-code-action">
              <span class="md-editor-code-lang">vue</span>
              <span class="md-editor-copy-button" data-tips="复制代码">复制代码</span>
              
              <span class="md-editor-collapse-tips"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-circle-chevron-left md-editor-icon"><circle cx="12" cy="12" r="10"/><path d="m14 16-4-4 4-4"/></svg></span>
            </div>
          </summary>
          <pre><code class="language-vue" language=vue><span class="md-editor-code-block">&lt;template&gt;
  &lt;MdEditor v-model=&quot;text&quot; @onUploadImg=&quot;onUploadImg&quot; /&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { ref } from 'vue';
import axios from 'axios';
import { MdEditor } from 'md-editor-v3';
import 'md-editor-v3/lib/style.css';

const text = ref('# Hello Editor');

const onUploadImg = async (files, callback) =&gt; {
  const res = await Promise.all(
    files.map((file) =&gt; {
      return new Promise((rev, rej) =&gt; {
        const form = new FormData();
        form.append('file', file);

        axios
          .post('/api/img/upload', form, {
            headers: {
              'Content-Type': 'multipart/form-data',
            },
          })
          .then((res) =&gt; rev(res))
          .catch((error) =&gt; rej(error));
      });
    })
  );

  callback(res.map((item) =&gt; item.data.url));
};
&lt;/script&gt;</span><span rn-wrapper aria-hidden="true"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

        </details>
      <h3 id="🏳️‍🌈 语言扩展与替换" tabindex="-1" data-line="561"><a class="header-anchor" href="#🏳️‍🌈 语言扩展与替换">🏳️‍🌈 语言扩展与替换</a></h3>

        <details  data-line="563" class="md-editor-code">
          <summary class="md-editor-code-head">
            <div class="md-editor-code-flag"><span></span><span></span><span></span></div>
            <div class="md-editor-code-action">
              <span class="md-editor-code-lang">vue</span>
              <span class="md-editor-copy-button" data-tips="复制代码">复制代码</span>
              
              <span class="md-editor-collapse-tips"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-circle-chevron-left md-editor-icon"><circle cx="12" cy="12" r="10"/><path d="m14 16-4-4 4-4"/></svg></span>
            </div>
          </summary>
          <pre><code class="language-vue" language=vue><span class="md-editor-code-block">&lt;template&gt;
  &lt;MdEditor v-model=&quot;state.text&quot; :language=&quot;state.language&quot; /&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { reactive } from 'vue';
import { MdEditor, config } from 'md-editor-v3';
import 'md-editor-v3/lib/style.css';

config({
  editorConfig: {
    languageUserDefined: {
      'my-lang': {
        toolbarTips: {
          bold: '加粗',
          underline: '下划线',
          italic: '斜体',
          strikeThrough: '删除线',
          title: '标题',
          sub: '下标',
          sup: '上标',
          quote: '引用',
          unorderedList: '无序列表',
          orderedList: '有序列表',
          task: '任务列表',
          codeRow: '行内代码',
          code: '块级代码',
          link: '链接',
          image: '图片',
          table: '表格',
          mermaid: 'mermaid图',
          katex: 'katex公式',
          revoke: '后退',
          next: '前进',
          save: '保存',
          prettier: '美化',
          pageFullscreen: '浏览器全屏',
          fullscreen: '屏幕全屏',
          preview: '预览',
          htmlPreview: 'html代码预览',
          catalog: '目录',
          github: '源码地址',
        },
        titleItem: {
          h1: '一级标题',
          h2: '二级标题',
          h3: '三级标题',
          h4: '四级标题',
          h5: '五级标题',
          h6: '六级标题',
        },
        imgTitleItem: {
          link: '添加链接',
          upload: '上传图片',
          clip2upload: '裁剪上传',
        },
        linkModalTips: {
          linkTitle: '添加链接',
          imageTitle: '添加图片',
          descLabel: '链接描述：',
          descLabelPlaceHolder: '请输入描述...',
          urlLabel: '链接地址：',
          urlLabelPlaceHolder: '请输入链接...',
          buttonOK: '确定',
        },
        clipModalTips: {
          title: '裁剪图片上传',
          buttonUpload: '上传',
        },
        copyCode: {
          text: '复制代码',
          successTips: '已复制！',
          failTips: '复制失败！',
        },
        mermaid: {
          flow: '流程图',
          sequence: '时序图',
          gantt: '甘特图',
          class: '类图',
          state: '状态图',
          pie: '饼图',
          relationship: '关系图',
          journey: '旅程图',
        },
        katex: {
          inline: '行内公式',
          block: '块级公式',
        },
        footer: {
          markdownTotal: '字数',
          scrollAuto: '同步滚动',
        },
      },
    },
  },
});

const state = reactive({
  text: '',
  // 定义语言名称
  language: 'my-lang',
});
&lt;/script&gt;</span><span rn-wrapper aria-hidden="true"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

        </details>
      <p data-line="669">你也可以使用现成的扩展语言：<a href="https://github.com/imzbf/md-editor-extension" target="_blank">md-editor-extension</a>。使用及贡献方式见扩展库文档~</p>
<h3 id="📄 目录获取与展示" tabindex="-1" data-line="671"><a class="header-anchor" href="#📄 目录获取与展示">📄 目录获取与展示</a></h3>
<ul data-line="673">
<li data-line="673">
<p data-line="673">获取</p>

        <details  data-line="675" class="md-editor-code" open="">
          <summary class="md-editor-code-head">
            <div class="md-editor-code-flag"><span></span><span></span><span></span></div>
            <div class="md-editor-code-action">
              <span class="md-editor-code-lang">vue</span>
              <span class="md-editor-copy-button" data-tips="复制代码">复制代码</span>
              
              <span class="md-editor-collapse-tips"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-circle-chevron-left md-editor-icon"><circle cx="12" cy="12" r="10"/><path d="m14 16-4-4 4-4"/></svg></span>
            </div>
          </summary>
          <pre><code class="language-vue" language=vue><span class="md-editor-code-block">&lt;template&gt;
  &lt;MdEditor v-model=&quot;text&quot; @onGetCatalog=&quot;onGetCatalog&quot; /&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { reactive } from 'vue';
import { MdEditor } from 'md-editor-v3';
import 'md-editor-v3/lib/style.css';

const state = reactive({
  text: '',
  catalogList: [],
});

const onGetCatalog = (list) =&gt; {
  state.catalogList = list;
};
&lt;/script&gt;</span><span rn-wrapper aria-hidden="true"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

        </details>
      </li>
<li data-line="696">
<p data-line="696">展示</p>
<p data-line="698">使用内置<code>MdCatalog</code>组件</p>

        <details  data-line="700" class="md-editor-code" open="">
          <summary class="md-editor-code-head">
            <div class="md-editor-code-flag"><span></span><span></span><span></span></div>
            <div class="md-editor-code-action">
              <span class="md-editor-code-lang">vue</span>
              <span class="md-editor-copy-button" data-tips="复制代码">复制代码</span>
              
              <span class="md-editor-collapse-tips"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-circle-chevron-left md-editor-icon"><circle cx="12" cy="12" r="10"/><path d="m14 16-4-4 4-4"/></svg></span>
            </div>
          </summary>
          <pre><code class="language-vue" language=vue><span class="md-editor-code-block">&lt;template&gt;
  &lt;MdPreview :modelValue=&quot;state.text&quot; :id=&quot;state.id&quot; :theme=&quot;state.theme&quot; /&gt;
  &lt;MdCatalog :editorId=&quot;state.id&quot; :scrollElement=&quot;scrollElement&quot; :theme=&quot;state.theme&quot; /&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { reactive } from 'vue';
import { MdPreview, MdCatalog } from 'md-editor-v3';
import 'md-editor-v3/lib/preview.css';

const state = reactive({
  theme: 'dark',
  text: '标题',
  id: 'my-editor',
});

const scrollElement = document.documentElement;
&lt;/script&gt;</span><span rn-wrapper aria-hidden="true"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

        </details>
      </li>
</ul>
<h3 id="🪚 调整工具栏" tabindex="-1" data-line="721"><a class="header-anchor" href="#🪚 调整工具栏">🪚 调整工具栏</a></h3>
<p data-line="723">从<code>v1.6.0</code>开始，支持调整工具栏内容顺序和分割符了。</p>

        <details  data-line="725" class="md-editor-code" open="">
          <summary class="md-editor-code-head">
            <div class="md-editor-code-flag"><span></span><span></span><span></span></div>
            <div class="md-editor-code-action">
              <span class="md-editor-code-lang">vue</span>
              <span class="md-editor-copy-button" data-tips="复制代码">复制代码</span>
              
              <span class="md-editor-collapse-tips"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-circle-chevron-left md-editor-icon"><circle cx="12" cy="12" r="10"/><path d="m14 16-4-4 4-4"/></svg></span>
            </div>
          </summary>
          <pre><code class="language-vue" language=vue><span class="md-editor-code-block">&lt;template&gt;
  &lt;MdEditor v-model=&quot;text&quot; :toolbars=&quot;toolbars&quot; /&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { MdEditor } from 'md-editor-v3';
import 'md-editor-v3/lib/style.css';

const toolbars = ['italic', 'underline', '-', 'bold', '=', 'github'];
&lt;/script&gt;</span><span rn-wrapper aria-hidden="true"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

        </details>
      <h3 id="💪 自定义工具栏" tabindex="-1" data-line="738"><a class="header-anchor" href="#💪 自定义工具栏">💪 自定义工具栏</a></h3>
<p data-line="740">这里包含了<code>mark</code>标记扩展普通工具栏和<code>emoji</code>扩展下拉工具栏的类型</p>
<p data-line="742">可运行源码参考本文档<a href="https://github.com/imzbf/md-editor-v3/blob/docs/src/pages/Preview/index.vue" target="_blank">docs</a>。</p>
<figure data-line="744"><img src="https://imzbf.github.io/md-editor-v3/imgs/mark_emoji.gif" alt="标记及Emoji预览" class="md-zoom"></figure>
<blockquote data-line="746">
<p data-line="746">更多 emoji，<a href="https://getemoji.com/" target="_blank">https://getemoji.com/</a>。</p>
</blockquote>
<h3 id="🧙‍♂️ 调整编辑器样式" tabindex="-1" data-line="748"><a class="header-anchor" href="#🧙‍♂️ 调整编辑器样式">🧙‍♂️ 调整编辑器样式</a></h3>
<p data-line="750">2.x 使用 css 变量定义了大部分内容：</p>

        <details  data-line="752" class="md-editor-code" open="">
          <summary class="md-editor-code-head">
            <div class="md-editor-code-flag"><span></span><span></span><span></span></div>
            <div class="md-editor-code-action">
              <span class="md-editor-code-lang">less</span>
              <span class="md-editor-copy-button" data-tips="复制代码">复制代码</span>
              
              <span class="md-editor-collapse-tips"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-circle-chevron-left md-editor-icon"><circle cx="12" cy="12" r="10"/><path d="m14 16-4-4 4-4"/></svg></span>
            </div>
          </summary>
          <pre><code class="language-less" language=less><span class="md-editor-code-block">.css-vars(@isDark) {
  --md-color: if(@isDark, #999, #222);
  --md-hover-color: if(@isDark, #bbb, #000);
  --md-bk-color: if(@isDark, #000, #fff);
  --md-bk-color-outstand: if(@isDark, #333, #f2f2f2);
  --md-bk-hover-color: if(@isDark, #1b1a1a, #f5f7fa);
  --md-border-color: if(@isDark, #2d2d2d, #e6e6e6);
  --md-border-hover-color: if(@isDark, #636262, #b9b9b9);
  --md-border-active-color: if(@isDark, #777, #999);
  --md-modal-mask: #00000073;
  --md-scrollbar-bg-color: if(@isDark, #0f0f0f, #e2e2e2);
  --md-scrollbar-thumb-color: if(@isDark, #2d2d2d, #0000004d);
  --md-scrollbar-thumb-hover-color: if(@isDark, #3a3a3a, #00000059);
  --md-scrollbar-thumb-active-color: if(@isDark, #3a3a3a, #00000061);
}

.md-editor {
  .css-vars(false);
}

.md-editor-dark {
  .css-vars(true);
}</span><span rn-wrapper aria-hidden="true"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

        </details>
      <p data-line="778">只需要调整对应的 css 变量，比如调整暗夜模式下的背景：</p>

        <details  data-line="780" class="md-editor-code" open="">
          <summary class="md-editor-code-head">
            <div class="md-editor-code-flag"><span></span><span></span><span></span></div>
            <div class="md-editor-code-action">
              <span class="md-editor-code-lang">css</span>
              <span class="md-editor-copy-button" data-tips="复制代码">复制代码</span>
              
              <span class="md-editor-collapse-tips"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-circle-chevron-left md-editor-icon"><circle cx="12" cy="12" r="10"/><path d="m14 16-4-4 4-4"/></svg></span>
            </div>
          </summary>
          <pre><code class="language-css" language=css><span class="md-editor-code-block">.md-editor-dark {
  --md-bk-color: #333 !important;
}</span><span rn-wrapper aria-hidden="true"><span></span><span></span><span></span></span></code></pre>

        </details>
      <h3 id="🙍🏻‍♂️ 自行引入扩展库" tabindex="-1" data-line="786"><a class="header-anchor" href="#🙍🏻‍♂️ 自行引入扩展库">🙍🏻‍♂️ 自行引入扩展库</a></h3>
<p data-line="788">这里给出一个完全不使用外部链接，全部自行引入的示例：</p>
<ol data-line="790">
<li data-line="790">安装依赖</li>
</ol>

        <details  data-line="792" class="md-editor-code" open="">
          <summary class="md-editor-code-head">
            <div class="md-editor-code-flag"><span></span><span></span><span></span></div>
            <div class="md-editor-code-action">
              <span class="md-editor-code-lang">shell</span>
              <span class="md-editor-copy-button" data-tips="复制代码">复制代码</span>
              
              <span class="md-editor-collapse-tips"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-circle-chevron-left md-editor-icon"><circle cx="12" cy="12" r="10"/><path d="m14 16-4-4 4-4"/></svg></span>
            </div>
          </summary>
          <pre><code class="language-shell" language=shell><span class="md-editor-code-block">yarn add screenfull katex cropperjs@1 mermaid highlight.js prettier</span><span rn-wrapper aria-hidden="true"><span></span></span></code></pre>

        </details>
      <div data-line="796" class="md-editor-admonition md-editor-admonition-info">
<p data-line="797">目前<code>cropperjs@2</code>正在优化中，暂未计划切换到 2.0 版本。</p>
</div>
<ol start="2" data-line="800">
<li data-line="800">配置到编辑器</li>
</ol>
<div data-line="802" class="md-editor-admonition md-editor-admonition-warning">
<p data-line="804">我们建议你在项目入口配置，例如 vite 创建的项目中的 main.js。不要在组件中去调用 <code>config</code> ！</p>
</div>
<p data-line="808">main.js</p>

        <details  data-line="810" class="md-editor-code">
          <summary class="md-editor-code-head">
            <div class="md-editor-code-flag"><span></span><span></span><span></span></div>
            <div class="md-editor-code-action">
              <span class="md-editor-code-lang">js</span>
              <span class="md-editor-copy-button" data-tips="复制代码">复制代码</span>
              
              <span class="md-editor-collapse-tips"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-circle-chevron-left md-editor-icon"><circle cx="12" cy="12" r="10"/><path d="m14 16-4-4 4-4"/></svg></span>
            </div>
          </summary>
          <pre><code class="language-js" language=js><span class="md-editor-code-block">import { config } from 'md-editor-v3';
import 'md-editor-v3/lib/style.css';

import screenfull from 'screenfull';

import katex from 'katex';
import 'katex/dist/katex.min.css';

import Cropper from 'cropperjs';
import 'cropperjs/dist/cropper.css';

import mermaid from 'mermaid';

import highlight from 'highlight.js';
import 'highlight.js/styles/atom-one-dark.css';

// &lt;3.0
// import prettier from 'prettier';
// import parserMarkdown from 'prettier/parser-markdown';
// &gt;=3.0
import * as prettier from 'prettier';
import parserMarkdown from 'prettier/plugins/markdown';

config({
  editorExtensions: {
    prettier: {
      prettierInstance: prettier,
      parserMarkdownInstance: parserMarkdown,
    },
    highlight: {
      instance: highlight,
    },
    screenfull: {
      instance: screenfull,
    },
    katex: {
      instance: katex,
    },
    cropper: {
      instance: Cropper,
    },
    mermaid: {
      instance: mermaid,
    },
  },
});</span><span rn-wrapper aria-hidden="true"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

        </details>
      <p data-line="859">App.vue</p>

        <details  data-line="861" class="md-editor-code" open="">
          <summary class="md-editor-code-head">
            <div class="md-editor-code-flag"><span></span><span></span><span></span></div>
            <div class="md-editor-code-action">
              <span class="md-editor-code-lang">vue</span>
              <span class="md-editor-copy-button" data-tips="复制代码">复制代码</span>
              
              <span class="md-editor-collapse-tips"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-circle-chevron-left md-editor-icon"><circle cx="12" cy="12" r="10"/><path d="m14 16-4-4 4-4"/></svg></span>
            </div>
          </summary>
          <pre><code class="language-vue" language=vue><span class="md-editor-code-block">&lt;template&gt;
  &lt;MdEditor v-model=&quot;text&quot; /&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { ref } from 'vue';
import { MdEditor } from 'md-editor-v3';
import 'md-editor-v3/lib/style.css';

const text = ref('');
&lt;/script&gt;</span><span rn-wrapper aria-hidden="true"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

        </details>
      <blockquote data-line="875">
<p data-line="875">注意：highlight 的样式自行引入后，将不支持切换代码样式。</p>
</blockquote>
<h3 id="🔒 编译时处理 XSS" tabindex="-1" data-line="877"><a class="header-anchor" href="#🔒 编译时处理 XSS">🔒 编译时处理 XSS</a></h3>
<p data-line="879">5.0 版本将内置的 XSS 扩展导出了，不再默认添加， 导出的 XSS 扩展在默认白名单的基础上，增加了部分标签和属性：</p>

        <details  data-line="881" class="md-editor-code">
          <summary class="md-editor-code-head">
            <div class="md-editor-code-flag"><span></span><span></span><span></span></div>
            <div class="md-editor-code-action">
              <span class="md-editor-code-lang">json</span>
              <span class="md-editor-copy-button" data-tips="复制代码">复制代码</span>
              
              <span class="md-editor-collapse-tips"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-circle-chevron-left md-editor-icon"><circle cx="12" cy="12" r="10"/><path d="m14 16-4-4 4-4"/></svg></span>
            </div>
          </summary>
          <pre><code class="language-json" language=json><span class="md-editor-code-block">{
  &quot;img&quot;: [&quot;class&quot;],
  // 支持任务列表
  &quot;input&quot;: [&quot;class&quot;, &quot;disabled&quot;, &quot;type&quot;, &quot;checked&quot;],
  // 主要支持youtobe、腾讯视频、哔哩哔哩等内嵌视频代码
  &quot;iframe&quot;: [
    &quot;class&quot;,
    &quot;width&quot;,
    &quot;height&quot;,
    &quot;src&quot;,
    &quot;title&quot;,
    &quot;border&quot;,
    &quot;frameborder&quot;,
    &quot;framespacing&quot;,
    &quot;allow&quot;,
    &quot;allowfullscreen&quot;
  ]
}</span><span rn-wrapper aria-hidden="true"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

        </details>
      <h4 id="🔒 添加 xss 扩展" tabindex="-1" data-line="902"><a class="header-anchor" href="#🔒 添加 xss 扩展">🔒 添加 xss 扩展</a></h4>

        <details  data-line="904" class="md-editor-code" open="">
          <summary class="md-editor-code-head">
            <div class="md-editor-code-flag"><span></span><span></span><span></span></div>
            <div class="md-editor-code-action">
              <span class="md-editor-code-lang">js</span>
              <span class="md-editor-copy-button" data-tips="复制代码">复制代码</span>
              
              <span class="md-editor-collapse-tips"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-circle-chevron-left md-editor-icon"><circle cx="12" cy="12" r="10"/><path d="m14 16-4-4 4-4"/></svg></span>
            </div>
          </summary>
          <pre><code class="language-js" language=js><span class="md-editor-code-block">import { config, XSSPlugin } from 'md-editor-v3';

config({
  markdownItPlugins(plugins) {
    return [
      ...plugins,
      {
        type: 'xss',
        plugin: XSSPlugin,
        options: {},
      },
    ];
  },
});</span><span rn-wrapper aria-hidden="true"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

        </details>
      <h4 id="🔏 修改 xss 配置" tabindex="-1" data-line="921"><a class="header-anchor" href="#🔏 修改 xss 配置">🔏 修改 xss 配置</a></h4>
<p data-line="923">我们添加一个允许图片加载失败的事件</p>

        <details  data-line="925" class="md-editor-code">
          <summary class="md-editor-code-head">
            <div class="md-editor-code-flag"><span></span><span></span><span></span></div>
            <div class="md-editor-code-action">
              <span class="md-editor-code-lang">js</span>
              <span class="md-editor-copy-button" data-tips="复制代码">复制代码</span>
              
              <span class="md-editor-collapse-tips"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-circle-chevron-left md-editor-icon"><circle cx="12" cy="12" r="10"/><path d="m14 16-4-4 4-4"/></svg></span>
            </div>
          </summary>
          <pre><code class="language-js" language=js><span class="md-editor-code-block">import { config, XSSPlugin } from 'md-editor-v3';
// import { getDefaultWhiteList } from 'xss';

config({
  markdownItPlugins(plugins) {
    return [
      ...plugins,
      {
        type: 'xss',
        plugin: XSSPlugin,
        options: {
          // 方式一：自行扩展全部
          // xss() {
          //   return {
          //     whiteList: Object.assign({}, getDefaultWhiteList(), {
          //       // 如果你需要使用任务列表，请保留这项配置
          //       img: ['class'],
          //       input: ['class', 'disabled', 'type', 'checked'],
          //       // 如果你需要使用嵌入视频代码，请保留这项配置
          //       iframe: [
          //         'class',
          //         'width',
          //         'height',
          //         'src',
          //         'title',
          //         'border',
          //         'frameborder',
          //         'framespacing',
          //         'allow',
          //         'allowfullscreen'
          //       ],
          //       img: ['onerror']
          //     })
          //   };
          // },
          // 方式二：在默认白名单的基础上新增。^4.15.6
          extendedWhiteList: {
            img: ['onerror'],
          },
        },
      },
    ];
  },
});</span><span rn-wrapper aria-hidden="true"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

        </details>
      <p data-line="972">更新详细配置参考 <a href="https://github.com/leizongmin/js-xss/blob/master/README.zh.md" target="_blank">js-xss</a></p>
<h3 id="🔒 编译后处理 XSS" tabindex="-1" data-line="974"><a class="header-anchor" href="#🔒 编译后处理 XSS">🔒 编译后处理 XSS</a></h3>
<p data-line="976">通过<code>sanitize</code>属性，自行处理不安全的 html 内容。例如：使用<code>sanitize-html</code>处理</p>

        <details  data-line="978" class="md-editor-code" open="">
          <summary class="md-editor-code-head">
            <div class="md-editor-code-flag"><span></span><span></span><span></span></div>
            <div class="md-editor-code-action">
              <span class="md-editor-code-lang">shell</span>
              <span class="md-editor-copy-button" data-tips="复制代码">复制代码</span>
              
              <span class="md-editor-collapse-tips"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-circle-chevron-left md-editor-icon"><circle cx="12" cy="12" r="10"/><path d="m14 16-4-4 4-4"/></svg></span>
            </div>
          </summary>
          <pre><code class="language-shell" language=shell><span class="md-editor-code-block">yarn add sanitize-html</span><span rn-wrapper aria-hidden="true"><span></span></span></code></pre>

        </details>
      
        <details  data-line="982" class="md-editor-code" open="">
          <summary class="md-editor-code-head">
            <div class="md-editor-code-flag"><span></span><span></span><span></span></div>
            <div class="md-editor-code-action">
              <span class="md-editor-code-lang">vue</span>
              <span class="md-editor-copy-button" data-tips="复制代码">复制代码</span>
              
              <span class="md-editor-collapse-tips"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-circle-chevron-left md-editor-icon"><circle cx="12" cy="12" r="10"/><path d="m14 16-4-4 4-4"/></svg></span>
            </div>
          </summary>
          <pre><code class="language-vue" language=vue><span class="md-editor-code-block">&lt;template&gt;
  &lt;MdEditor :sanitize=&quot;sanitize&quot; /&gt;
&lt;/template&gt;

&lt;script setup&gt;
import sanitizeHtml from 'sanitize-html';
import { MdEditor } from 'md-editor-v3';
import 'md-editor-v3/lib/style.css';

const sanitize = (html) =&gt; {
  return sanitizeHtml(html);
};
&lt;/script&gt;</span><span rn-wrapper aria-hidden="true"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

        </details>
      <p data-line="998">更详细的实现可以参考本文档的源码！</p>
<h3 id="🗂 折叠文档内容" tabindex="-1" data-line="1000"><a class="header-anchor" href="#🗂 折叠文档内容">🗂 折叠文档内容</a></h3>

        <details  data-line="1002" class="md-editor-code" open="">
          <summary class="md-editor-code-head">
            <div class="md-editor-code-flag"><span></span><span></span><span></span></div>
            <div class="md-editor-code-action">
              <span class="md-editor-code-lang">js</span>
              <span class="md-editor-copy-button" data-tips="复制代码">复制代码</span>
              
              <span class="md-editor-collapse-tips"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-circle-chevron-left md-editor-icon"><circle cx="12" cy="12" r="10"/><path d="m14 16-4-4 4-4"/></svg></span>
            </div>
          </summary>
          <pre><code class="language-js" language=js><span class="md-editor-code-block">import { config } from 'md-editor-v3';
import { foldGutter } from '@codemirror/language';
import { lineNumbers } from '@codemirror/view';

config({
  codeMirrorExtensions(_theme, extensions) {
    return [...extensions, lineNumbers(), foldGutter()];
  },
});</span><span rn-wrapper aria-hidden="true"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

        </details>
      <h3 id="🏄🏻‍♂️ 新窗口打开链接" tabindex="-1" data-line="1014"><a class="header-anchor" href="#🏄🏻‍♂️ 新窗口打开链接">🏄🏻‍♂️ 新窗口打开链接</a></h3>
<ol data-line="1016">
<li data-line="1016">安装额外的扩展</li>
</ol>

        <details  data-line="1018" class="md-editor-code" open="">
          <summary class="md-editor-code-head">
            <div class="md-editor-code-flag"><span></span><span></span><span></span></div>
            <div class="md-editor-code-action">
              <span class="md-editor-code-lang">shell</span>
              <span class="md-editor-copy-button" data-tips="复制代码">复制代码</span>
              
              <span class="md-editor-collapse-tips"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-circle-chevron-left md-editor-icon"><circle cx="12" cy="12" r="10"/><path d="m14 16-4-4 4-4"/></svg></span>
            </div>
          </summary>
          <pre><code class="language-shell" language=shell><span class="md-editor-code-block">yarn add markdown-it-link-attributes</span><span rn-wrapper aria-hidden="true"><span></span></span></code></pre>

        </details>
      <ol start="2" data-line="1022">
<li data-line="1022">将扩展添加到编译器中</li>
</ol>

        <details  data-line="1024" class="md-editor-code">
          <summary class="md-editor-code-head">
            <div class="md-editor-code-flag"><span></span><span></span><span></span></div>
            <div class="md-editor-code-action">
              <span class="md-editor-code-lang">js</span>
              <span class="md-editor-copy-button" data-tips="复制代码">复制代码</span>
              
              <span class="md-editor-collapse-tips"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-circle-chevron-left md-editor-icon"><circle cx="12" cy="12" r="10"/><path d="m14 16-4-4 4-4"/></svg></span>
            </div>
          </summary>
          <pre><code class="language-js" language=js><span class="md-editor-code-block">import { config } from 'md-editor-v3';
import LinkAttr from 'markdown-it-link-attributes';
// import Anchor from 'markdown-it-anchor';

config({
  markdownItPlugins(plugins) {
    return [
      ...plugins,
      {
        type: 'linkAttr',
        plugin: LinkAttr,
        options: {
          matcher(href: string) {
            // 如果使用了markdown-it-anchor
            // 应该忽略标题头部的锚点链接
            return !href.startsWith('#');
          },
          attrs: {
            target: '_blank',
          },
        },
      },
      // {
      //   type: 'anchor',
      //   plugin: Anchor,
      //   options: {
      //     permalink: Anchor.permalink.headerLink(),
      //     slugify(s: string) {
      //       return s;
      //     }
      //   }
      // }
    ];
  },
});</span><span rn-wrapper aria-hidden="true"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

        </details>
      <h3 id="☑️ 可切换状态的任务列表" tabindex="-1" data-line="1062"><a class="header-anchor" href="#☑️ 可切换状态的任务列表">☑️ 可切换状态的任务列表</a></h3>

        <details  data-line="1064" class="md-editor-code" open="">
          <summary class="md-editor-code-head">
            <div class="md-editor-code-flag"><span></span><span></span><span></span></div>
            <div class="md-editor-code-action">
              <span class="md-editor-code-lang">js</span>
              <span class="md-editor-copy-button" data-tips="复制代码">复制代码</span>
              
              <span class="md-editor-collapse-tips"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-circle-chevron-left md-editor-icon"><circle cx="12" cy="12" r="10"/><path d="m14 16-4-4 4-4"/></svg></span>
            </div>
          </summary>
          <pre><code class="language-js" language=js><span class="md-editor-code-block">import { config } from 'md-editor-v3';
config({
  markdownItPlugins(plugins, { editorId }) {
    return plugins.map((item) =&gt; {
      if (item.type === 'taskList') {
        return {
          ...item,
          options: {
            ...item.options,
            enabled: true,
            // 如果只是想对某个编辑器开启这个功能
            // enabled: editorId === 'myId'
          },
        };
      }
      return item;
    });
  },
});</span><span rn-wrapper aria-hidden="true"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

        </details>
      
        <details  data-line="1086" class="md-editor-code" open="">
          <summary class="md-editor-code-head">
            <div class="md-editor-code-flag"><span></span><span></span><span></span></div>
            <div class="md-editor-code-action">
              <span class="md-editor-code-lang">vue</span>
              <span class="md-editor-copy-button" data-tips="复制代码">复制代码</span>
              
              <span class="md-editor-collapse-tips"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-circle-chevron-left md-editor-icon"><circle cx="12" cy="12" r="10"/><path d="m14 16-4-4 4-4"/></svg></span>
            </div>
          </summary>
          <pre><code class="language-vue" language=vue><span class="md-editor-code-block">&lt;MdEditor id=&quot;myId&quot; v-model=&quot;text&quot; /&gt;</span><span rn-wrapper aria-hidden="true"><span></span></span></code></pre>

        </details>
      <h3 id="🎳 协同办公" tabindex="-1" data-line="1090"><a class="header-anchor" href="#🎳 协同办公">🎳 协同办公</a></h3>
<p data-line="1092">安装<a href="https://github.com/yjs/yjs" target="_blank">yjs</a>及相关库</p>

        <details  data-line="1094" class="md-editor-code" open="">
          <summary class="md-editor-code-head">
            <div class="md-editor-code-flag"><span></span><span></span><span></span></div>
            <div class="md-editor-code-action">
              <span class="md-editor-code-lang">shell</span>
              <span class="md-editor-copy-button" data-tips="复制代码">复制代码</span>
              
              <span class="md-editor-collapse-tips"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-circle-chevron-left md-editor-icon"><circle cx="12" cy="12" r="10"/><path d="m14 16-4-4 4-4"/></svg></span>
            </div>
          </summary>
          <pre><code class="language-shell" language=shell><span class="md-editor-code-block">npm i yjs y-codemirror.next y-websocket</span><span rn-wrapper aria-hidden="true"><span></span></span></code></pre>

        </details>
      <p data-line="1098">在 <code>editorConfig.ts</code> 中添加 <code>yjs</code> 扩展：</p>

        <details  data-line="1100" class="md-editor-code">
          <summary class="md-editor-code-head">
            <div class="md-editor-code-flag"><span></span><span></span><span></span></div>
            <div class="md-editor-code-action">
              <span class="md-editor-code-lang">ts</span>
              <span class="md-editor-copy-button" data-tips="复制代码">复制代码</span>
              
              <span class="md-editor-collapse-tips"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-circle-chevron-left md-editor-icon"><circle cx="12" cy="12" r="10"/><path d="m14 16-4-4 4-4"/></svg></span>
            </div>
          </summary>
          <pre><code class="language-ts" language=ts><span class="md-editor-code-block">import { config } from 'md-editor-v3';
import { Compartment } from '@codemirror/state';
import * as Y from 'yjs';
import { yCollab } from 'y-codemirror.next';
import { WebsocketProvider } from 'y-websocket';
import * as random from 'lib0/random';

const usercolors = [
  { color: '#30bced', light: '#30bced33' },
  { color: '#6eeb83', light: '#6eeb8333' },
  { color: '#ffbc42', light: '#ffbc4233' },
  { color: '#ecd444', light: '#ecd44433' },
  { color: '#ee6352', light: '#ee635233' },
  { color: '#9ac2c9', light: '#9ac2c933' },
  { color: '#8acb88', light: '#8acb8833' },
  { color: '#1be7ff', light: '#1be7ff33' },
];

export const yjsCompartment = new Compartment();

let currentProvider: WebsocketProvider | null = null;
let currentDoc: Y.Doc | null = null;

export const cleanupYjs = () =&gt; {
  currentProvider?.destroy();
  currentDoc?.destroy();
  currentProvider = null;
  currentDoc = null;
};

export const createYjsExtension = (roomId: string) =&gt; {
  cleanupYjs();

  const userColor = usercolors[random.uint32() % usercolors.length];

  const ydoc = new Y.Doc();
  const provider = new WebsocketProvider('ws://127.0.0.1:1234/ws', roomId, ydoc);
  const ytext = ydoc.getText('module-name');

  const undoManager = new Y.UndoManager(ytext);

  provider.awareness.setLocalStateField('user', {
    name: 'Anonymous ' + Math.floor(Math.random() * 100),
    color: userColor.color,
    colorLight: userColor.light,
  });

  currentDoc = ydoc;
  currentProvider = provider;

  return yCollab(ytext, provider.awareness, { undoManager });
};

config({
  codeMirrorExtensions(_theme, extensions) {
    return [...extensions, yjsCompartment.of([])];
  },
});</span><span rn-wrapper aria-hidden="true"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

        </details>
      <p data-line="1161">如果只想在某一个编辑器中使用，尝试通过<code>editorId</code>进行区别(<code>^4.20.0</code>)：</p>

        <details  data-line="1163" class="md-editor-code" open="">
          <summary class="md-editor-code-head">
            <div class="md-editor-code-flag"><span></span><span></span><span></span></div>
            <div class="md-editor-code-action">
              <span class="md-editor-code-lang">js</span>
              <span class="md-editor-copy-button" data-tips="复制代码">复制代码</span>
              
              <span class="md-editor-collapse-tips"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-circle-chevron-left md-editor-icon"><circle cx="12" cy="12" r="10"/><path d="m14 16-4-4 4-4"/></svg></span>
            </div>
          </summary>
          <pre><code class="language-js" language=js><span class="md-editor-code-block">config({
  codeMirrorExtensions(_theme, extensions, _keyBindings, { editorId }) {
    return editorId === 'myId' ? [...extensions, yjsCompartment.of([])] : extensions;
  },
});</span><span rn-wrapper aria-hidden="true"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

        </details>
      <p data-line="1171">MyEditor.vue</p>

        <details  data-line="1173" class="md-editor-code">
          <summary class="md-editor-code-head">
            <div class="md-editor-code-flag"><span></span><span></span><span></span></div>
            <div class="md-editor-code-action">
              <span class="md-editor-code-lang">vue</span>
              <span class="md-editor-copy-button" data-tips="复制代码">复制代码</span>
              
              <span class="md-editor-collapse-tips"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-circle-chevron-left md-editor-icon"><circle cx="12" cy="12" r="10"/><path d="m14 16-4-4 4-4"/></svg></span>
            </div>
          </summary>
          <pre><code class="language-vue" language=vue><span class="md-editor-code-block">&lt;template&gt;
  &lt;input v-model=&quot;roomId&quot; /&gt;
  &lt;MdEditor :id=&quot;id&quot; v-model=&quot;text&quot; ref=&quot;editorRef&quot; /&gt;
&lt;/template&gt;

&lt;script setup lang=&quot;ts&quot;&gt;
import { onMounted, onBeforeUnmount, ref, useId, watch } from 'vue';
import { MdEditor, ExposeParam } from 'md-editor-v3';
import { createYjsExtension, yjsCompartment, cleanupYjs } from './extendEditor';

defineOptions({
  name: 'MyEditor',
});

const roomId = ref('default-room');

const id = useId();
const text = ref('');
const editorRef = ref&lt;ExposeParam&gt;();

const updateEditorExtension = () =&gt; {
  const view = editorRef.value?.getEditorView();
  if (view) {
    const extension = createYjsExtension(roomId.value);
    view.dispatch({
      effects: yjsCompartment.reconfigure(extension),
    });
  }
};

onMounted(() =&gt; {
  updateEditorExtension();
});

watch([roomId], (newVal, oldVal) =&gt; {
  if (newVal !== oldVal) {
    updateEditorExtension(newVal);
  }
});

onBeforeUnmount(() =&gt; {
  cleanupYjs();
});
&lt;/script&gt;</span><span rn-wrapper aria-hidden="true"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

        </details>
      <div data-line="1220" class="md-editor-admonition md-editor-admonition-tip">
<p data-line="1222">上面的代码只展示了单个编辑器切换房间的方式，如果单页面存在多个编辑器并且需要切换房间，请自行探索。</p>
</div>
<h3 id="📝 扩展代码块工具" tabindex="-1" data-line="1226"><a class="header-anchor" href="#📝 扩展代码块工具">📝 扩展代码块工具</a></h3>

        <details  data-line="1228" class="md-editor-code" open="">
          <summary class="md-editor-code-head">
            <div class="md-editor-code-flag"><span></span><span></span><span></span></div>
            <div class="md-editor-code-action">
              <span class="md-editor-code-lang">js</span>
              <span class="md-editor-copy-button" data-tips="复制代码">复制代码</span>
              
              <span class="md-editor-collapse-tips"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-circle-chevron-left md-editor-icon"><circle cx="12" cy="12" r="10"/><path d="m14 16-4-4 4-4"/></svg></span>
            </div>
          </summary>
          <pre><code class="language-js" language=js><span class="md-editor-code-block">config({
  markdownItPlugins(plugins, { editorId }) {
    return plugins.map((item) =&gt; {
      switch (item.type) {
        case 'code': {
          return {
            ...item,
            options: {
              ...item.options,
              extraTools: '&lt;span class=&quot;extra-code-tools&quot;&gt;额外的功能&lt;/span&gt;',
              // 或者
              // extraTools: ({ lang }) =&gt; '&lt;span class=&quot;extra-code-tools&quot;&gt;额外的功能&lt;/span&gt;',
            },
          };
        }

        default: {
          return item;
        }
      }
    });
  },
});</span><span rn-wrapper aria-hidden="true"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

        </details>
      <p data-line="1254">它会被显示在复制代码按钮后面，配合<code>onRemount</code>事件，你能够正确的通过<code>querySelectorAll</code>获取到它们并绑定监听事件。</p>
<p data-line="1256">下面是一个打印代码的示例：</p>

        <details  data-line="1258" class="md-editor-code" open="">
          <summary class="md-editor-code-head">
            <div class="md-editor-code-flag"><span></span><span></span><span></span></div>
            <div class="md-editor-code-action">
              <span class="md-editor-code-lang">js</span>
              <span class="md-editor-copy-button" data-tips="复制代码">复制代码</span>
              
              <span class="md-editor-collapse-tips"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-circle-chevron-left md-editor-icon"><circle cx="12" cy="12" r="10"/><path d="m14 16-4-4 4-4"/></svg></span>
            </div>
          </summary>
          <pre><code class="language-js" language=js><span class="md-editor-code-block">const onRemount = () =&gt; {
  document.querySelectorAll(`#${editorId} .${prefix}-preview .${prefix}-code`).forEach((codeBlock: Element) =&gt; {
    const tools = codeBlock.querySelectorAll('.extra-code-tools');
    tools.forEach((item) =&gt; {
      item.addEventListener('click', (e) =&gt; {
        e.preventDefault();

        const activeCode = codeBlock.querySelector('input:checked + pre code') || codeBlock.querySelector('pre code');

        const codeText = activeCode?.textContent;

        console.log(codeText);
      });
    });
  });
};</span><span rn-wrapper aria-hidden="true"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

        </details>
      <h2 id="🧻 编辑此页面" tabindex="-1" data-line="1277"><a class="header-anchor" href="#🧻 编辑此页面">🧻 编辑此页面</a></h2>
<p data-line="1279"><a href="https://github.com/imzbf/md-editor-v3/blob/dev-docs/public/demo-zh-CN.md" target="_blank">demo-zh-CN</a></p>
</div><!----><!--]--></div></div><div class="catalog"><div class="affix"><div class="md-editor-catalog"><!----></div></div></div></div></div><!--]--><!----></div></div><div id="teleports"></div><script type="application/json" data-nuxt-data="nuxt-app" data-ssr="true" id="__NUXT_DATA__" data-src="/md-editor-v3/zh-CN/demo/_payload.json?fef33df5-d761-4492-8cd8-456da3713513">[{"state":1,"once":3,"_errors":4,"serverRendered":6,"path":7,"pinia":8,"prerenderedAt":14},["Reactive",2],{},["Set"],["ShallowReactive",5],{},true,"/zh-CN/demo",{"appStore":9},{"theme":10,"previewTheme":11,"codeTheme":12,"lang":13},"light","default","atom","en-US",1757766732212]</script><script>window.__NUXT__={};window.__NUXT__.config={public:{},app:{baseURL:"/md-editor-v3",buildId:"fef33df5-d761-4492-8cd8-456da3713513",buildAssetsDir:"/_nuxt/",cdnURL:""}}</script></body></html>